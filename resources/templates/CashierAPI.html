<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Cashier API</title>
<link rel="stylesheet" href="css/fontawesome.min.css" />
<link rel="stylesheet" href="css/bootstrap.min.css" />
<link rel="stylesheet" href="css/templatemo-style.css">
<link href="css/tailwind.min.css" rel="stylesheet">
<style>
.dropdown {
	position: relative;
	display: inline-block;
}

.dropdown::before {
	position: absolute;
	content: " \2193";
	top: 0px;
	right: -8px;
	height: 20px;
	width: 20px;
}
</style>

</head>
<body>
	<div>
		<nav class="navbar navbar-expand-xl">
			<div class="container h-100">
				<a class="navbar-brand" href="/verify">
					<h1>Inventory Management System</h1>
				</a>
				<ul>
					<li class="mr-3"><a
						class="inline-block border border-blue-500 rounded py-2 px-4 bg-blue-500 hover:bg-blue-700 text-white"
						href="/">logout</a></li>
				</ul>

			</div>


		</nav>
		<ul class="flex justify-between">
			<li class="mr-3"><a
				class="inline-block border border-white rounded hover:border-gray-200 text-blue-500 hover:bg-gray-200 py-2 px-4"
				href="/verify">Search Product</a></li>
			<li class="mr-3"><a
				class="inline-block border border-blue-500 rounded py-2 px-4 bg-blue-500 hover:bg-blue-700 text-white"
				href="/CashierAPI">Cashier API</a></li>
			<li class="mr-3"><a
				class="inline-block py-2 px-4 text-gray-400 cursor-not-allowed"
				href="/adminID">Add/Update Product</a></li>
			<li class="mr-3"><a
				class="inline-block py-2 px-4 text-gray-400 cursor-not-allowed"
				href="/adminID">List Products and Calculation</a></li>
			<li class="/adminID"><a
				class="inline-block py-2 px-4 text-gray-400 cursor-not-allowed"
				href="#">User Management</a></li>

			<li class="mr-3"><a
				class="inline-block py-2 px-4 text-gray-400 cursor-not-allowed"
				href="#">Users Logs</a></li>

		</ul>
	</div>

	<div
		class="bg-blue-100 border-t border-b border-blue-500 text-blue-700 px-4 py-3"
		role="alert">
		<p class="font-bold">WELCOME TO CASHIER API</p>
		<p class="text-sm">API use for CASHIER for sales management.</p>
	</div>


	<form class="w-full max-w-lg mx-auto mt-10" method="POST">

		<div class="w-64 mx-auto mt-10">
			<label
				class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">Select
				User Account:</label> <input name="label1" type="text" list="sortlabel"
				th:value="${userComm}"
				class="dropdown flex-shrink-0 block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline"
				placeholder="Select">
			<datalist id="sortlabel">
				<option th:each="user:${user}" th:text="${user.userName}"></option>

			</datalist>

		</div>
		<br>
		<div class="flex flex-wrap -mx-3 mb-6">
			<div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
				<label
					class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
					for="grid-first-name"> Product ID: </label> <input
					class="appearance-none block w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"
					name="productID" id="grid-first-name" type="text"
					placeholder="Enter ID">
				<p class="text-red-500 text-xs italic" th:text="${warn}"></p>
			</div>
			<div class="w-full md:w-1/2 px-3">
				<label
					class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
					for="grid-last-name"> Quantity </label> <input
					class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
					id="grid-last-name" name="quantity" type="text"
					placeholder="Type Quantity">
			</div>

		</div>

		<div class="inline-block">
			<button
				class="shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"
				type="submit">Add / Update</button>

			<a href="/CashierAPI"><button
					class="shadow bg-red-300 hover:bg-red-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"
					type="button">Cancel</button> </a>

		</div>





	</form>

	<br />
	<br />
	<form method="POST">
		<div th:if="${show==true}">
			<h2 class="font-bold text-xl text-gray-800 text-center"
				align="center">Products</h2>
			<br />
			<table class="table-auto mx-auto mb-5">
				<thead>
					<tr>
						<th class="px-4 py-2">ID</th>
						<th class="px-4 py-2">Brand</th>
						<th class="px-4 py-2">Price ($)</th>
						<th class="px-4 py-2">Quantity</th>
						<th class="px-4 py-2">Discount</th>
						<th class="px-4 py-2">Total Price ($)</th>
						<th class="px-4 py-2">Date</th>

					</tr>
				</thead>
				<tbody>
					<tr th:each="activity:${activity}">
						<td th:text="${activity.rid}" class="border px-4 py-2"></td>
						<td th:text="${activity.brand}" class="border px-4 py-2"></td>
						<td th:text="${activity.price}" class="border px-4 py-2"></td>
						<td th:text="${activity.quantity}" class="border px-4 py-2"></td>
						<td th:text="${activity.discount}" class="border px-4 py-2"></td>
						<td th:text="${activity.totalPrice}" class="border px-4 py-2"></td>
						<td th:text="${activity.date}" class="border px-4 py-2"></td>
					</tr>

				</tbody>



			</table>

			<table class="table-auto mx-auto mb-5">

				<tbody>



					<tr class="mt-10">
						<td class="border px-4 py-2 font-bold bg-gray-500 text-white">Commission
							to:</td>
						<td class="border px-4 py-2"><input type="text"
							th:value="${userComm}"></td>
						<td class="border px-4 py-2 font-bold bg-gray-500 text-white">Total
							Price ($):</td>
						<td class="border px-4 py-2"><input type="text"
							th:value="${AllPrice}"></td>
						<td class="border px-4 py-2 font-bold bg-gray-500 text-white">Action:</td>
						<td class="border px-4 py-2 "><input type="text"
							th:value="${purchase}"></td>
					</tr>
					<tr>

						<td><button
								class="modal-open mt-10 shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"
								name="submit" type="button">Confirm</button></td>
					</tr>
				</tbody>



			</table>



		</div>
	</form>


	<div
		class="overflow-hidden modal opacity-0 pointer-events-none fixed w-full h-full top-10 left-30 flex items-center justify-center">


		<div
			class="overflow-hidden modal-container bg-white w-11/12 md:max-w-md  rounded shadow-lg ">

			<div
				class="modal-close absolute top-0 right-0 cursor-pointer flex flex-col items-center mt-4 mr-4 text-white text-sm z-0">
				<svg class="fill-current text-white"
					xmlns="http://www.w3.org/2000/svg" width="18" height="18"
					viewBox="0 0 18 18">
          <path
						d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
				<span class="text-sm">(Esc)</span>
			</div>

			<!-- Add margin if you want to see some of the overlay behind the modal-->
			<div id="modalContent" class=" py-4 text-left px-6 overflow-hidden">
				<!--Title-->
				<div class="flex justify-between items-center pb-3">
					<p class="text-2xl font-bold text-red-500">Confirmation</p>
					<div class="modal-close cursor-pointer z-50">
						<svg class="fill-current text-black"
							xmlns="http://www.w3.org/2000/svg" width="18" height="18"
							viewBox="0 0 18 18">
              <path
								d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
            </svg>
					</div>
				</div>

				<!-- Form For Add product -->
				<div class="content1 .overflow-hidden mx-auto">
					<form class="w-full max-w-lg" method="POST">
						<p class="mt-2 text-l text-blue-500 font-bold">Proceed to
							process this item?</p>

						<p class="mt-3 text-s">Any item Refund may need the Admin ID!</p>
						<br>
						<p class="text-xl font-bold">
							Total Price: <span class="text-green-500">$</span><span
								class="text-green-500" th:text="${AllPrice}"></span>
						</p>
						<br> <br> <label class="text-m text-red-500">Please
							enter Customer Payment Value below ($):</label> <input
							class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
							id="grid-password" type="text" placeholder="Payment ($)"
							name="payment">

						<button
							class="mr-5 px-4 border bg-transparent p-3 rounded-lg text-indigo-500 hover:bg-gray-100 hover:text-indigo-400 mr-2"
							type="submit">Proceed</button>



					</form>
				</div>
				<!--Footer-->
				<div id="modalOverlay"
					class="overflow-hidden absolute w-full h-full"></div>

			</div>
		</div>
	</div>

	<script>
		var openmodal = document.querySelectorAll('.modal-open')
		for (var i = 0; i < openmodal.length; i++) {
			openmodal[i].addEventListener('click', function(event) {
				event.preventDefault()
				toggleModal()
			})
		}

		const overlay = document.querySelector('#modalOverlay')
		overlay.addEventListener('click', toggleModal)

		var closemodal = document.querySelectorAll('.modal-close')
		for (var i = 0; i < closemodal.length; i++) {
			closemodal[i].addEventListener('click', toggleModal)
		}

		document.onkeydown = function(evt) {
			evt = evt || window.event
			var isEscape = false
			if ("key" in evt) {
				isEscape = (evt.key === "Escape" || evt.key === "Esc")
			} else {
				isEscape = (evt.keyCode === 27)
			}
			if (isEscape && document.body.classList.contains('modal-active')) {
				toggleModal()
			}
		};

		function toggleModal() {
			const body = document.querySelector('.content1')
			const modal = document.querySelector('.modal')
			modal.classList.toggle('opacity-0')
			modal.classList.toggle('pointer-events-none')
			body.classList.toggle('modal-active')
		}
	</script>


	<div th:if="${showReceipt==true}">
		<div
			class="mx-auto w-50 bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md"
			role="alert">
			<div class="flex">
				<div class="py-1">
					<svg class="fill-current h-6 w-6 text-teal-500 mr-4"
						xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
						<path
							d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z" /></svg>
				</div>
				<div>
					<p class="font-bold text-green-500">Change: $<span th:text="${clientchange}"></span></p>
					<p class="text-sm" th:text="${message}"></p>
				</div>
			</div>
		</div>
		
		<div class="mx-auto">
			<input
				class="ml-40 mt-5 bg-blue-500 hover:bg-teal-700 border-blue-500 hover:border-teal-700 text-sm border-4 text-white py-1 px-2 rounded"
				type="button" onclick="printDiv('printableArea')"
				value="Print Receipt" /> <input
				class=" mt-5 bg-blue-500 hover:bg-teal-700 border-blue-500 hover:border-teal-700 text-sm border-4 text-white py-1 px-2 rounded"
				onclick="myFunction()" type="button" value="Show Receipt">
		</div>
		<br>
		<div id="myDIV" style="display: none;">


			<div id="printableArea">
				<div>
					<h1 align="center" class="font-bold text-4xl">Inventory
						Management System</h1>
					<p align="center" class="text-xl">Welcome to Inventory
						Management System (Cashier API)</p>
					<p align="center">---------------------------------------------------------------------------------------------------------</p>
					<p align="center" class="text-xl">TAX INVOICE</p>
					<br>
					<p align="center" class="text-xl">
						Date: <span th:text="${dateInvoice}"></span>
					</p>
					<p align="center" class="text-xl">
						Invoice No: #<span th:text="${invoice}"></span>
					</p>
					<br>

					<table class="table-auto mx-auto mb-5">
						<thead>
							<tr>
								<th class="px-4 py-2 text-xl">ID</th>
								<th class="px-4 py-2 text-xl">Brand</th>
								<th class="px-4 py-2 text-xl">Price ($)</th>
								<th class="px-4 py-2 text-xl">Quantity</th>
								<th class="px-4 py-2 text-xl">Discount</th>
								<th class="px-4 py-2 text-xl">Total Price ($)</th>
								<th class="px-4 py-2 text-xl">%</th>


							</tr>
						</thead>
						<tbody>
							<tr th:each="store:${store}">
								<td th:text="${store.id}" class="text-xl px-4 py-2"></td>
								<td th:text="${store.brand}" class="text-xl px-4 py-2"></td>
								<td th:text="${store.price}" class="text-xl px-4 py-2"></td>
								<td th:text="${store.quantity}" class="text-xl px-4 py-2"></td>
								<td th:text="${store.discount}" class="text-xl px-4 py-2"></td>
								<td th:text="${store.totalPrice}" class="text-xl px-4 py-2"></td>
								<td th:text="${store.user}" class="text-xl px-4 py-2"></td>

							</tr>
							<tr>
						</tbody>
					</table>

					<p align="center" class="text-xl ml-40">
						Subtotal: $<span th:text="${clientPrice}"></span>
					</p>
					<p align="center" class="text-xl ml-40">
						Payment: $<span th:text="${payment}"></span>
					</p>
					<p align="center" class="text-xl ml-40">
						Change: $<span th:text="${clientchange}"></span>
					</p>

					<br> <br> <br>
					<p align="center" class="text-xl">Thank You!</p>
					<p align="center" class="text-xl">**Please Come Again**</p>
					<br>
				</div>

			</div>
		</div>
	</div>

	<script>
		function printDiv(printableArea) {
			var printContents = document.getElementById(printableArea).innerHTML;
			var originalContents = document.body.innerHTML;

			document.body.innerHTML = printContents;

			window.print();

			document.body.innerHTML = originalContents;
		}

		function myFunction() {
			var x = document.getElementById("myDIV");
			if (x.style.display === "none") {
				x.style.display = "block";
			} else {
				x.style.display = "none";
			}
		}
	</script>
</body>
</html>